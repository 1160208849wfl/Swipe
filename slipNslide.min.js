/*
 * slipNslide Mobile Slider
 * http://m.alt8242.com/slipNslide/
 *
 * Brad Birdsall, Prime
 * Copyright 2011, Licensed GPL & MIT
 *
*/
window.slipNslide=function(a,b){this.options=b||{},this.position=this.options.startPosition||0,this.callback=this.options.callback||function(){},this.container=a,this.element=this.container.getElementsByTagName("ul")[0],this.slides=this.element.getElementsByTagName("li"),this.container.style.overflow="hidden",this.element.style.listStyle="none",this.setup(),this.element.addEventListener("touchstart",this,!1),this.element.addEventListener("touchmove",this,!1),this.element.addEventListener("touchend",this,!1),this.element.addEventListener("webkitTransitionEnd",this,!1),window.addEventListener("resize",this,!1)},slipNslide.prototype={setup:function(){var a=this.container.getBoundingClientRect(),b=this.width;this.width=a.width,this.container.style.visibility="hidden",this.element.style.width=this.slides.length*this.width+"px";var c=this.slides.length;while(c--){var d=this.slides[c];d.style.width=this.width+"px",d.style.display="inline-block"}this.end=(this.slides.length-1)*this.width,this.position=this.position?this.position/b*this.width:this.position,this.slide(this.position,0),this.container.style.visibility="visible"},slide:function(a,b){this.element.style.webkitTransitionDuration=b+"ms",this.element.style.webkitTransform="translate3d("+a+"px,0,0)"},atBounds:function(){return this.deltaX+this.position>0||Math.abs(this.position)==this.end&&this.end+this.deltaX<this.end},handleEvent:function(a){switch(a.type){case"touchstart":this.onTouchStart(a);break;case"touchmove":this.onTouchMove(a);break;case"touchend":this.onTouchEnd(a);break;case"webkitTransitionEnd":this.callback(a,this.slides[-this.position/this.width]);break;case"resize":this.setup()}},onTouchStart:function(a){this.startX=a.touches[0].pageX,this.startY=a.touches[0].pageY,this.time=Number(new Date),this.isScrolling=undefined,this.deltaX=0,this.element.style.webkitTransitionDuration=0},onTouchMove:function(a){this.deltaX=a.touches[0].pageX-this.startX,typeof this.isScrolling=="undefined"&&(this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(a.touches[0].pageY-this.startY))),this.isScrolling||(a.preventDefault(),this.deltaX=this.atBounds()?this.deltaX/(Math.abs(this.deltaX)/this.width+1):this.deltaX,this.slide(this.deltaX+this.position))},onTouchEnd:function(a){this.isScrolling||(this.position+=Number(new Date)-this.time<250&&Math.abs(this.deltaX)>20||Math.abs(this.deltaX)>this.width/2?this.atBounds()?0:this.deltaX>0?this.width:-this.width:0,this.slide(this.position,300))}}